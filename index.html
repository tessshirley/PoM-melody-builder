<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physics of Music - Melody Builder</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Physics of Music Melody Builder</h1>
            <p class="subtitle">Explore the relationship between music theory and sound physics through sine wave harmonics</p>
        </header>
        
        <div class="controls">
            <div class="controls-group">
                <label for="root-note">Root Note:</label>
                <select id="root-note">
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                    <option value="G">G</option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                </select>
            </div>
            
            <div class="controls-group">
                <label for="scale-type">Scale Type:</label>
                <select id="scale-type">
                    <option value="major">Major Scale</option>
                    <option value="minor">Minor Scale</option>
                </select>
            </div>
            
            <div class="controls-group">
                <label for="instrument-category">Instrument Family:</label>
                <select id="instrument-category">
                    <option value="strings">Strings</option>
                    <option value="woodwinds">Woodwinds</option>
                    <option value="brass">Brass</option>
                </select>
            </div>
            
            <div class="controls-group">
                <label for="instrument-type">Instrument:</label>
                <select id="instrument-type">
                    <!-- Options will be populated by JavaScript -->
                </select>
            </div>
            
            <div class="buttons-group">
                <button id="play-btn">Play Melody</button>
                <button id="clear-btn">Clear Notes</button>
            </div>
        </div>

        <!-- Instrument Info Panel -->
        <div class="instrument-info">
            <div id="instrument-details">
                <h3 id="current-instrument">Violin (Strings)</h3>
                <p id="instrument-description">Click an instrument to learn about its harmonic structure</p>
            </div>
        </div>

        <!-- Keyboard -->
        <div class="keyboard-container">
            <h3>Keyboard (Click notes to build melody)</h3>
            <div class="keyboard" id="keyboard">
                <!-- Notes will be generated by JavaScript -->
            </div>
        </div>

        <!-- Melody Display -->
        <div class="melody-display">
            <h3>Your Melody:</h3>
            <div class="melody-notes" id="melody-notes">No notes yet...</div>
            <div class="melody-info">
            </div>
        </div>

        <!-- Physics Visualization -->
        <div class="visualization-container">
            <h3>Physics Visualization</h3>
            
            <div class="visualization-controls">
                <div class="vis-mode-select">
                    <input type="radio" id="waveform" name="vis-mode" value="waveform" checked>
                    <label for="waveform">Waveform</label>
                </div>
            </div>
            
            <div class="canvas-container">
                <canvas id="waveform-canvas" width="800" height="300"></canvas>
                <div class="canvas-label" id="canvas-label">Waveform Visualization</div>
            </div>
        </div>

        <!-- Physics Data Panel -->
        <div class="physics-info">
            <h3>Physics Data</h3>
            <div class="data-grid">
                <div class="data-item">
                    <div class="data-label">Frequency</div>
                    <div class="data-value" id="frequency">-- Hz</div>
                    <div class="data-explanation">Cycles per second (Pitch)</div>
                </div>
                <div class="data-item">
                    <div class="data-label">Wavelength</div>
                    <div class="data-value" id="wavelength">-- m</div>
                    <div class="data-explanation">Distance between wave peaks</div>
                </div>
                <div class="data-item">
                    <div class="data-label">Wave Period</div>
                    <div class="data-value" id="period">-- ms</div>
                    <div class="data-explanation">Time for one complete cycle</div>
                </div>
            </div>
            
            <div class="physics-explanation" id="physics-explanation">
                <h4>Physics Explanation:</h4>
                <p>Every musical sound can be broken down into sine waves at different frequencies (harmonics). The relative strength of these harmonics creates the unique tone color (timbre) of each instrument.</p>
            </div>
        </div>

        <!-- Educational Panel -->
        <div class="educational-panel">
            <h3>Physics of Music Concepts</h3>
            <div class="concept-grid">
                <div class="concept">
                    <h4>Harmonic Series</h4>
                    <p>All complex sounds are sums of sine waves at frequencies f, 2f, 3f, 4f... This series creates the unique tone color of each instrument.</p>
                </div>
                <div class="concept">
                    <h4>Consonance & Dissonance</h4>
                    <p>Simple frequency ratios (3:2, 4:3) create smooth interference patterns (consonance). Complex ratios create chaotic beating (dissonance).</p>
                </div>
                <div class="concept">
                    <h4>Timbre & Waveforms</h4>
                    <p>Different instruments emphasize different harmonics. String instruments have rich harmonics, while flutes are nearly pure sine waves.</p>
                </div>
            </div>
        </div>

        <footer>
            <p>Physics of Music Project • Created using Tone.js and Canvas API • Frequency calculations based on A4 = 440Hz</p>
            <p class="footnote">All instrument sounds are generated from sine wave harmonics demonstrating Fourier's Theorem</p>
        </footer>
    </div>

    <!-- Load Tone.js from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <script src="script.js"></script>
</body>
</html>